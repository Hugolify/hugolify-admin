{{- $collection := .collection | default "pages" -}}
{{- $filters := .filters | default false -}}
{{- $display_fields := .display_fields | default (slice `"title"`) -}}
{{- $search_fields := .search_fields | default (slice `"title"`) -}}
{{- $name := .name | default $collection -}}
{{- $i18n := $collection -}}
{{- if ne .name "items" -}}
  {{- $i18n = $name -}}
{{- end -}}
{{- if or (strings.Contains $collection "posts_authors") (strings.Contains $collection "posts_categories") (strings.Contains $collection "posts_tags") -}}
  {{- $collection = replace $collection "posts_" "" -}} 
{{- end -}}
{{- $multiple := .multiple | default false -}}
{{- $required := .required | default false -}}
{{- $value_field := `{{slug}}` -}}
{{/* Decap CMS bug with bundle page (add /_index), we use title for taxonomies */}}
{{- if eq site.Params.admin.cms "cloudcannon" "decapcms" "netlifycms" "staticcms" -}}
  {{- with site.GetPage $collection -}}
    {{- if eq .Kind "taxonomy" -}}
      {{- $value_field = `{{title}}` -}}
    {{- end -}}
  {{- end -}}
{{- end -}}
{{- $value_field = cond site.Params.admin.config.id `{{id}}` $value_field -}}


{{- $args := dict 
  "label" (i18n (print "admin.collections." $i18n ".label"))
  "label_singular" (i18n (print "admin.collections." $i18n ".label") 1)
  "hint" (i18n (print "admin.collections." $i18n ".hint"))
  "name" $name
  "collection" $collection
  "display_fields" $display_fields
  "search_fields" $search_fields
  "value_field" $value_field
  "filters" $filters
  "multiple" $multiple
  "required" $required
  -}}

{{ partial "admin/widgets/relation.js" $args }}